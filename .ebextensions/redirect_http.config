option_settings:
  aws:elb:listener:443:
    ListenerProtocol: HTTPS
    InstanceProtocol: HTTP
    InstancePort: '80'
    SSLCertificateId: arn:aws:acm:us-east-1:668062742509:certificate/b164a1d0-cd4e-4cac-a3d4-09d894d080c0

# This creates the Nginx config file to force the redirect
files:
  /etc/nginx/conf.d/https-redirect.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      if ($http_x_forwarded_proto = 'http') {
        return 301 https://$host$request_uri;
      }